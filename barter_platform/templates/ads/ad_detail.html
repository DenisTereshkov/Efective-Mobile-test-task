{% extends "base.html" %}
{% load bootstrap5 %}

{% block title %}{{ ad.title }}{% endblock %}

{% block content %}
<div class="card col-md-8 mx-auto mt-4">
  <div class="card-header">
    <h1 class="mb-0">{{ ad.title }}</h1>
  </div>
  
  <div class="card-body">
    <div class="mb-4">
      <p class="text-muted mb-2">
        <i class="bi bi-person"></i> Автор: {{ ad.user.username }}
      </p>
      <p class="text-muted small">
        <i class="bi bi-calendar"></i> Опубликовано: {{ ad.created_at|date:"d.m.Y H:i" }}
      </p>
      <span class="badge bg-secondary">{{ ad.get_condition_display }}</span>
    </div>

    {% if ad.image_url %}
    <div class="mb-4 text-center">
      <img src="{{ ad.image_url }}" alt="{{ ad.title }}" class="img-fluid rounded" style="max-height: 400px;">
    </div>
    {% endif %}

    <div class="mb-4">
      <h5>Описание:</h5>
      <p class="lead">{{ ad.description }}</p>
    </div>

    <div class="d-flex justify-content-between">
      <a href="{% url 'ads_list' %}" class="btn btn-secondary">
        <i class="bi bi-arrow-left"></i> Назад к списку
      </a>
      
      {% if request.user == ad.user %}
      <div>
        <a href="{% url 'edit' ad.pk %}" class="btn btn-outline-primary me-2">
          <i class="bi bi-pencil"></i> Редактировать
        </a>
        <a href="{% url 'delete' ad.pk %}" class="btn btn-outline-danger">
          <i class="bi bi-trash"></i> Удалить
        </a>
      </div>
      {% endif %}
      {% if user.is_authenticated and user != ad.user %}
        <a 
          href="{% url 'create_exchange'  pk=ad.id %}" 
          class="btn btn-sm btn-outline-primary"
        >
          Предложить обмен
        </a>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
